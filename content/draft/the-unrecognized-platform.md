---
title: "The Unrecognized Platform"
date: 2018-12-01
tags: ["openshift", "kubernetes", "paas", "containers"]
draft: true
---
It has been almost 3 years when I started playing with OpenShift/k8s and a bit more with what we call now Linux Containers. During this period (mostly at Red Hat) I've helped Customers from many different industries to move their workloads to OpenShift. I had the opportunity to work on both greenfield and brownfield projects, move or create simple microservices to run in OpenShift and take advantage from the features the platform brings to accelerate the development process, or brake old big monolithics into small microservices and build a CI/CD ecosystem around them. These are, reduced to the minimal expression, the typical use cases so far when using OpenShift/k8s. I recently had the opportunity to work on diferent use cases where we sucessfuly demostrated that the platform limits and posibilities are still not discovered.

This blog post will try to explain and show new exciting posibilities already avilable or looking to be available in the near future for the OpenShift platform. We have already implemented some of these new capabilities in Customers where are key for their business development and the feedback has been really possitive. Customers are already thinking in OpenShift/k8s as their base platform to run all their workloads, something similar that happened not many years ago with RHEL. This is a massive opportunity for both Red Hat and the Comunnity to continue leading the IT Enterprise direction.

From the initial days of OpenShift/k8s, the main idea was to orchestrate 'stateless' applications. These applications comming as a container images were going to be inmutable, as this is the nature and what makes a container 'special', and won't change over the time. They were not keeping any status as the industry thought at that time it was not necessary. As long the platform evolved, made popular and was globally adopted, new workload types aimed to be orquestrated and new features were asked, starting with applications that had the ability of record states, and react from those states once restarted, or applications that were sticked to some particular identity that must be preserved after restarts. This resulted in new supported Kubernetes objects called PetSet initially moved to StatefulSet afterwards. This provided the ability to run clusterized applications or applications that required using stable Network Identities.

As the Platform was getting more and more popular, new capabilities from different industries were asked. Not only the community but also big software and hardware vendors started working on solutions to cover these new requirements. This resulted in a variaty of new projects,iniciatives and capabilities added to the platform. As I mentioned before, I recently had the opportunity to work with Customers implementing these new funcionalities and also work closely with Red Hat and non Red Hat product teams to provide early feedback on these new capabilities and agree on how we can help Customers better and address uncoming requests as I will explain below.

Using GPUs in OpenShift/k8s is one of the new trending features we are trying to address now. This is implemented using [device plugins feature](https://docs.openshift.com/container-platform/3.11/dev_guide/device_plugins.html) which provides a solution for vendors to be able to advertise their resources to Kubelet and monitor them without writing custom Kubernetes code. The idea is to extend the existing k8s API so all these new capabilities could be added without modifying the Kubernetes project code. Check the [Device Manager Proposal](https://github.com/kubernetes/community/blob/master/contributors/design-proposals/resource-management/device-plugin.md) for further understanding and direction from the community on this. This feature allowed us recently to move complex workloads for a Customer where they had many different server racks isolated from each other, running Linux based applications using NVIDIA Graphics cards for calculation and rendering. Device manager API becomed GA in OpenShift 3.10, so running applications in OpenShift that require access to GPU cards provided by device plugins is fully supported by Red Hat. This was a great advantage for the mentioned Customer, as this feature was not only going to help them to save millions of Euros (every single rack for their use case was aorund 1M) but also accelerate their development process drasticaly as now they can use same ecosystem to run different processes that require calculation (CUDA from NVIDA) and GPU rendering, while so far they were tied to one particular Rack per process type. On these days where ML and IA are becoming more and more popular, this capability will be the key in order to get all these workloads running in OpenShift/k8s. There is still some work to do here, the main request we have from Customers is the ability to share a single GPU between different Pods, which is [not supported yet](https://github.com/kubernetes/kubernetes/issues/52757), but I'm pretty sure hardware vendors and both the Community will be able to solve this soon.

Running Windows Containers along Linux Containers is becoming a demand from some of our Customers. There is a joint effort between Red Hat and Microsoft on getting this working and supported in an Enterprise Level. Right now is available as a Dev Preview for Customers who want to try it and planned to be Tech Preview for next major OpenShift release coming in March 2019. For the last month, different drop versions of this Dev Preview have been tested across the globe on different Customers, and we had the opportunity to run tests on-prem and cloud based for a particular Customer. This feature was celebrated with big enthusiasm on the Customer Team, as they have some propietary software Windows based, and getting the ability to containerized this sofware, run it on the same ecosystem they are planning to run all their applications and be able to orchestrate Windows containers along Linux Containers will make their lifes much simplier. There is still lot of pending work to get this GA in the Platform, but the initial results from this very early stage release completly satisfied Customer expectations on this topic. We were able to provision an Hybrid OpenShift Cluster, with the Control Plane running on the Linux Hosts, and different compute Nodes formed by RHEL and Windows Server Core hosts. Using [OVN](https://kubernetes.io/docs/getting-started-guides/windows/#using-ovn-with-ovs) each Kubelet has the ability to spin up Pods and add its interface to OVS and connect it to OVN, so different Pods on different Host type (Windows and RHEL) can speak each other. As mentioned before this is still on Developer Preview stage, and many changes are happening on the Windows Server side. The initial version relyied on HyperV to manage the Network part, but Microsoft is planning to integrate OVN into their Netorking stack. Right now HyperV is not required any more but there is still work to do on this space. OVN will be the default Virtual Network for the next OpenShift major version coming in March 2019.

Multiarch is another hot topic now. We added PowerPC support for OpenShift recently, but we have been working on Customers where they need to orchestrate containers based on ARM architectures. We already have examples out there running OpenShift Upstream project (OKD) on Fedora ARM based Hosts. Amazon has recently announced ARM based new AWS instances. The industry is telling us that an heterogenus OpenShift Cluster with compute Nodes running different architecture based containers will be demanded very soon (some industries like Automotive, Industrial Control and Mobile Markets are aldeady demanding it), and Red Hat is putting a lot of effort to add Enterprise support on these architectures for its portfolio. This is a mandatory milestone that needs to be achive in order to consider OpenShift/k8s the "global platform" where to run all the industry workloads for the coming years.

One of my last Customers was using Big Data intensively. So far running Big Data workloads in OpenShift/k8s was not 





DONE === Windows containers along Linux container
DONE === GPU for calculation and rendering - AI focused
Big Data --- https://www.oreilly.com/ideas/progress-for-big-data-in-kubernetes
Different storage types on the same cluster
KubeVirt for VMs orchestration using k8s
DONE === ARM
